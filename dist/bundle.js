(()=>{"use strict";var t;!function(t){t.Cross="X",t.Circle="O"}(t||(t={}));const e=t;var n,r=function(){function t(t,e){this.row=t,this.col=e}return t.prototype.getRow=function(){return this.row},t.prototype.getCol=function(){return this.col},t.prototype.equals=function(t){return this.row===t.getRow()&&this.col===t.getCol()},t}(),o=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});const i=function(t){function e(e,n,r,o){void 0===r&&(r=void 0),void 0===o&&(o=!1);var i=t.call(this,e,n)||this;return i.content=r,i.isSelected=o,i}return o(e,t),e.prototype.getContent=function(){return this.content},e.prototype.getStatus=function(){return this.isSelected},e.prototype.setCell=function(t,e){this.content=t,this.isSelected=e},e}(r),u=function(){function t(t){void 0===t&&(t=3),this.size=t,this.board=[];for(var e=0;e<t;e++){for(var n=[],r=0;r<t;r++)n.push(new i(e,r));this.board.push(n)}}return t.prototype.getBoard=function(){return this.board},t.prototype.getSize=function(){return this.size},t.prototype.getCell=function(t){return this.board[t.getRow()][t.getCol()]},t.prototype.getRow=function(t){return this.board[t.getRow()]},t.prototype.getCol=function(t){var e=[];return this.board.map((function(n){n.map((function(n){n.getCol()!==t.getCol()||e.push(n)}))})),e},t.prototype.getDiagonal=function(t){var e=[this.getCell(t)],n=[this.getCell(t)];return this.board.map((function(r){r.map((function(r){var o=(r.getCol()-t.getCol())/(r.getRow()-t.getRow());1!==o?-1!==o||n.push(r):e.push(r)}))})),[e.sort((function(t,e){return t.getRow()-e.getRow()})),n.sort((function(t,e){return t.getRow()-e.getRow()}))]},t.prototype.setCell=function(t,e,n){this.getCell(t).setCell(e,n)},t}(),s=function(){function t(t,e){this.name=t,this.form=e}return t.prototype.getName=function(){return this.name},t.prototype.getForm=function(){return this.form},t}();var l;!function(t){t.END="END",t.PENDING="PENDING"}(l||(l={}));const c=l,a=function(){function t(t,n){void 0===t&&(t=3),void 0===n&&(n=[new s("Player 1",e.Cross),new s("Player 2",e.Circle)]),this.gameStatus=c.PENDING,this.players=n,this.boardGame=new u(t),this.remainingCells=t*t,this.currentPlayer=n[0]}return t.prototype.getPlayers=function(){return this.players},t.prototype.getBoardGame=function(){return this.boardGame},t.prototype.getCurrentPlayer=function(){return this.currentPlayer},t.prototype.getGameStatus=function(){return this.gameStatus},t.prototype.getRemainingCells=function(){return this.remainingCells},t.prototype.getWinner=function(){return this.winner},t.prototype.setCurrentPlayer=function(t){this.currentPlayer=t},t.prototype.setGameStatus=function(t){this.gameStatus=t},t.prototype.setRemainingCells=function(t){this.remainingCells=t},t.prototype.setWinner=function(t){this.winner=t},t.prototype.playerAction=function(t){if(this.gameStatus===c.PENDING&&(this.boardGame.setCell(t,this.currentPlayer.getForm(),!0),this.setRemainingCells(this.getRemainingCells()-1),!this.isOver(t))){var e=this.players.shift();this.currentPlayer=this.players[0],e&&this.players.push(e)}},t.prototype.isOver=function(t){var e=!1,n=this.boardGame.getSize();return this.checkRow(t,n,this.currentPlayer)||this.checkCol(t,n,this.currentPlayer)||this.checkDiagonal(t,n,this.currentPlayer)?(e=!0,this.setWinner(this.currentPlayer),this.setGameStatus(c.END),e):0===this.getRemainingCells()?(e=!0,this.setGameStatus(c.END),e):e},t.prototype.checkRow=function(t,e,n){var r=!1,o=this.getCellsInRowSelectedByPlayer(t,n);return o.length===e&&(r=o.filter((function(t){return t.getContent()===n.getForm()})).length===e),r},t.prototype.checkCol=function(t,e,n){var r=!1,o=this.getCellsInColSelectedByPLayer(t,n);return o.length===e&&(r=o.filter((function(t){return t.getContent()===n.getForm()})).length===e),r},t.prototype.checkDiagonal=function(t,e,n){var r=!1,o=this.getCellsInDiagonalSelectedByPLayer(t,n)[0],i=this.getCellsInDiagonalSelectedByPLayer(t,n)[1];return o.length===e&&(r=o.filter((function(t){return t.getContent()===n.getForm()})).length===e)||i.length===e&&(r=o.filter((function(t){return t.getContent()===n.getForm()})).length===e),r},t.prototype.getCellsInRowSelectedByPlayer=function(t,e){return this.getBoardGame().getRow(t).filter((function(t){return t.getContent()===e.getForm()}))},t.prototype.getCellsInColSelectedByPLayer=function(t,e){return this.getBoardGame().getCol(t).filter((function(t){return t.getContent()===e.getForm()}))},t.prototype.getCellsInDiagonalSelectedByPLayer=function(t,e){var n=this.getBoardGame().getDiagonal(t),r=n[0],o=n[1];return[r.filter((function(t){return t.getContent()===e.getForm()})),o.filter((function(t){return t.getContent()===e.getForm()}))]},t}(),g=function(){function t(){}return t.prototype.getElement=function(t){return document.querySelector(t)},t}();new(function(){function t(t){void 0===t&&(t=3),this.game=new a(t),this.view=new g}return t.prototype.getGame=function(){return this.game},t.prototype.getView=function(){return this.view},t}())})();